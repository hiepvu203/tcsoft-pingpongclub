@model tcsoft_pingpongclub.Models.PermissionRole

@{
    ViewData["Title"] = "Create PermissionRole";
}

<link href="~/css/create.css" rel="stylesheet" />
<h2>@ViewData["Title"]</h2>

<div class="container">
    <form asp-action="Create" method="post">
        <input type="hidden" name="id" value="@ViewBag.Role.IdRole" />

        <div class="form-group">
            <label>Role:</label>
            <input type="text" class="form-control" value="@ViewBag.Role.NameRole" readonly />
        </div>

        <div class="form-group">
            <label for="permission-select">Permission:</label>
            <select id="permission-select" name="permissionId" class="form-control">
                <option value="">-- Select Permission --</option>
                @foreach (var permission in ViewBag.Permissions)
                {
                    <option value="@permission.IdPermission" data-url="@permission.Url">
                        @permission.NamePermission
                    </option>
                }
            </select>
        </div>

        <div class="form-group">
            <label for="permission-url">Permission URL:</label>
            <input type="text" id="permission-url" class="form-control" readonly />
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>

        @if (ViewBag.SelectedPermission == null)
        {
            <div class="text-danger">Please select a permission to add.</div>
        }
    </form>

    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>

<script>
    document.getElementById('permission-select').addEventListener('change', function() {
        var selectedOption = this.options[this.selectedIndex];
        var url = selectedOption.getAttribute('data-url');

        document.getElementById('permission-url').value = url;
    });
</script>
